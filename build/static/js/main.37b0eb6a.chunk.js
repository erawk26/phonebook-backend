(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),c=n(18),a=n.n(c),u=(n(23),n(9)),i=n(4),s=n(3),l=(n(24),n(0)),d=function(e){var t=e.handleToUpdate;return Object(l.jsx)("input",{onChange:function(e){t(e.target.value)}})};function f(e){var t=e.id,n=e.value,o=e.handleToUpdate;return Object(l.jsx)("input",{placeholder:"+1(978)654-3210",value:n,id:t,onChange:function(e){var t=function(e){var t="          "+(e=e.replace(/[^\d]/g,"")).slice(-12),n=t.slice(-4),o=t.slice(-7,-4),r=t.slice(-10,-7),c=t.slice(-12,-10).replace(/[\s]/g,""),a="(".concat(r,")").concat(o,"-").concat(n),u="+".concat(c),i=e.length;return i>10?u+a:10===i?a:e}(e.target.value);e.target.value.length<=16&&o(t)}})}var b=function(e){var t=e.handleToSubmit,n=e.handleToUpdate,o=e.telephoneValue;return Object(l.jsxs)("form",{onSubmit:t,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{id:"name"})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)(f,{value:o,handleToUpdate:n,id:"number"})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.persons,n=e.handleToRemove;return t.map((function(e){return Object(l.jsxs)("div",{id:"person--"+e.id,children:[e.name,e.number?": "+e.number:"",Object(l.jsx)("button",{onClick:function(){return n(e)},children:"delete"})]},e.id)}))},j=function(e){var t=e.msg,n=e.type,o=void 0===n?"error":n;if(!t)return null;var r={status:{padding:"10px 20px",borderRadius:"4px",fontWeight:"bold",margin:"20px 5px"},error:{border:"1px solid red",color:"red"},success:{border:"1px solid green",color:"green"}},c=Object(i.a)(Object(i.a)({},r[o]),r.status);return Object(l.jsx)("div",{className:"status-msg ".concat(o),style:c,children:t})},m=n(6),p=n.n(m),O="/api/persons",v={getAll:function(){return p.a.get(O).then((function(e){return e.data}))},create:function(e){return p.a.post(O,e).then((function(e){return e.data}))},update:function(e,t){return p.a.put("".concat(O,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return p.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))}},g=function(){var e=Object(o.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(n),a=Object(s.a)(c,2),f=a[0],m=a[1],p=Object(o.useState)(""),O=Object(s.a)(p,2),g=O[0],x=O[1],w=Object(o.useState)(null),T=Object(s.a)(w,2),C=T[0],y=T[1],k=Object(o.useState)(null),S=Object(s.a)(k,2),L=S[0],D=S[1],U=Object(o.useState)(""),W=Object(s.a)(U,2),F=W[0],A=W[1],E=Object(o.useCallback)((function(e){x(e)}),[]),P=Object(o.useCallback)((function(e){A(e)}),[]),R=Object(o.useCallback)((function(e,t){if(e.length){var n=e.replace(/\D/g,""),o=e.toLowerCase(),r=n.length?t.filter((function(e){return-1!==e.number.replace(/\D/g,"").indexOf(n)})):[],c=t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(o)}));t=[].concat(Object(u.a)(r),Object(u.a)(c))}return t}),[]);return Object(o.useEffect)((function(){v.getAll().then((function(e){r(e)})).catch((function(e){y("We were unable to fetch the records from the server. ".concat(e.response.data.error)),console.log({error:e}),setTimeout((function(){y(null)}),5e3)}))}),[]),Object(o.useEffect)((function(){return m(R(g,n))}),[g,n,R]),Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(d,{handleToUpdate:E}),Object(l.jsx)(j,{msg:C||L,type:C?"error":"success"}),Object(l.jsx)("h3",{children:"Add a new"}),Object(l.jsx)(b,{telephoneValue:F,handleToUpdate:P,handleToSubmit:function(e){e.preventDefault();var t=e.target.elements.name.value;if(t){var o=n.find((function(e){return e.name.toLowerCase()===t.toLowerCase()}));if(o){if(window.confirm("".concat(o.name," is already in the phonebook. Do you want to update the phone number?"))){var c=e.target.elements.number.value,a=Object(i.a)(Object(i.a)({},o),{},{name:t,number:c.length?c:o.number});v.update(o.id,a).then((function(e){console.log({updated:e}),D("".concat(e.name,"'s information was successfully to updated.")),setTimeout((function(){D(null)}),5e3),r(n.map((function(n){return n.name.toLowerCase()!==t.toLowerCase()?n:e})))})).catch((function(e){y("We were unable to update ".concat(a.name," on the server.")),console.log({error:e}),setTimeout((function(){y(null)}),5e3)}))}}else{++n.map((function(e){return e.id})).sort((function(e,t){return t-e}))[0];var u={name:t,number:e.target.elements.number.value};v.create(u).then((function(t){e.target.reset(),A(""),console.log({created:t}),D("".concat(t.name," was successfully to added to the phonebook.")),setTimeout((function(){D(null)}),5e3),r(n.concat(t))})).catch((function(e){y("We were unable to add ".concat(u.name," to the server. ").concat(e.response.data.error)),console.log({error:e.response.data.error}),setTimeout((function(){y(null)}),5e3),r(n.filter((function(e){return e.id!==u.id})))}))}}}}),Object(l.jsx)("h3",{children:"Numbers"}),Object(l.jsx)(h,{persons:f,handleToRemove:function(e){window.confirm("Do you really want to remove?")&&v.remove(e.id).then((function(){console.log({removed:e}),D("".concat(e.name," was successfully deleted.")),setTimeout((function(){D(null)}),5e3),r(n.filter((function(t){return t.id!==e.id})))})).catch((function(t){y("We were unable to delete ".concat(e.name," from the server. ").concat(t.response.data.error)),console.log({error:t.response.data.error}),setTimeout((function(){y(null)}),5e3)}))}})]})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),o(e),r(e),c(e),a(e)}))};a.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root")),x()}},[[44,1,2]]]);
//# sourceMappingURL=main.37b0eb6a.chunk.js.map